<!-- New Leaf Modal -->
<div class="modal" id="newLeafModal" data-backdrop="false" ng-controller="forest.TreeController">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="working" id="newLeafModalWorking">
                <i class="icon-working icon-cog icon-spin"></i>
            </div>
            <div class="modal-header">
                <button class="close" ng-click="closeNewLeafModal()">
                    <i class="icon-remove-circle"></i>
                </button>
                <h3 class="modal-title">Create Leaf</h3>
            </div>
            <form name="createLeafForm" ng-submit="newLeaf()">
                <div class="modal-body">
                    <p class="error-text" id="invalidAddLeaf" ng-show="invalidAddLeaf"></p>
                    <div class="form-group">
                        <input id="leafName" class="form-control" type="text" placeholder="Leaf name" ng-model="leafName" required />
                        <span class="tipText">Tip: A leaf is an image that you wish to share with others</span>
                    </div>
                    <span class="btn btn-annotree fileinput-button">
                        <i class="icon-plus"></i>
                        <span>Add file...</span>
                        <input type="file" name="files" id="annotationImage" ng-model="annotationImage" />
                    </span>
                    <span style="margin-left:5px" id="filesName">No file selected (optional)</span>
                </div>
                <div>
                    Note that only images (max size is 10MB) can be uploaded at this time
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-annotree">
                        <strong>Create</strong>
                    </button>
                    <button type="button" class="btn btn-warning" ng-click="closeNewLeafModal()">
                        <strong>Cancel</strong>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modify Tree Modal -->
<div class="modal" id="modifyTreeModal" data-backdrop="false" ng-controller="forest.TreeController" ng-model="modifyTree">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="working" id="modifyTreeModalWorking">
                <i class="icon-working icon-cog icon-spin"></i>
            </div>
            <div class="modal-header">
                <button type="button" class="close" ng-click="closeModifyTreeModal()">
                    <i class="icon-remove-circle"></i>
                </button>
                <h3 class="modal-title">Tree Settings</h3>
            </div>
            <form name="modifyTreeForm" ng-submit="modifyTreeFn()">
                <div class="modal-body">
                    <p class="error-text" id="invalidModifyTree" ng-show="invalidModifyTree"></p>
                    <div class="form-group">
                        <input id="treeName" class="form-control" type="text" placeholder="Tree name" ng-model="modifyTree.name" required />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-annotree">
                        <strong>Rename</strong>
                    </button>
                    <button type="button" class="btn btn-danger" ng-click="deleteCallback()">
                        <strong>Delete</strong>
                    </button>
                    <button type="button" class="btn btn-warning" ng-click="cancelModifyTreeModal()">
                        <strong>Cancel</strong>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Delete Tree Confirmation Modal-->
<div class="modal" id="deleteCallbackModal" data-backdrop="false" ng-controller="forest.TreeController">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <i class="icon-remove-circle"></i>
                </button>
                <h3 class="modal-title">Confirm Tree Deletion</h3>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this tree? This action can not be undone.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" ng-click="deleteTree()">
                    <strong>Yes</strong>
                </button>
                <button type="button" class="btn btn-annotree" data-dismiss="modal">
                    <strong>No</strong>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modify Users Modal -->
<div class="modal" id="modifyUsersModal" data-backdrop="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="working" id="modifyUsersModalWorking">
                <i class="icon-working icon-cog icon-spin"></i>
            </div>
            <div class="modal-header">
                <button type="button" class="close" ng-click="closeModifyUsersModal()">
                    <i class="icon-remove-circle"></i>
                </button>
                <h3 class="modal-title">User Permissions</h3>
            </div>
            <div class="modal-body">
                <div class="error-text" id="invalidRemoveError" ng-show="invalidRemoveErrorShow"></div>
                <div id="treeModifyUsers">
                    <table>
                        <tbody>
                            <tr ng-repeat="user in treeInfo.users">
                                <td>
                                    {{user.first_name}} {{user.last_name}}
                                </td>
                                <td>
                                    {{user.email}}
                                </td>
                                <td>
                                    <i ng-click="removeFromTree(user)" class="icon-remove-circle" ng-hide="user.email == forestOwner"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <div class="col-10 error-text" id="invalidEmailError" ng-show="invalidEmailErrorShow"></div>
                    <div class="col-10">
                        <input id="userList" style="display:inline" class="form-control" type="email" placeholder="Email" style="max-width:320px;" ng-model="addUserID" required> 
                    </div>
                    <div class="col-2">
                        <a class="btn btn-annotree" ng-click="addUser()"><strong>Add</strong></a>
                    </div>
                    <div class="tipText col-10">
                        Tip: Search for a user or input an email to invite a new user to this tree.
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-annotree" ng-click="closeModifyUsersModal()">
                    <strong>Done</strong>
                </button>
            </div>
        </div>
    </div>
</div>
